## 功能

用于监控指定**进程ID**在运行期间内存波动，并记录在日志文件中，只支持**Windows**平台。

过程中同时按下`Ctrl+C`键，或者在窗口输入：`q`或`exit`或`quit`也可以退出监控。

注意：进程ID必须存在，若过程中进程退出，则监控退出。

## 用法

打开命令窗口，输入：

`memory_monitor.exe -p 进程ID [-m 内存波动] [-f 监控频率] [--help]`

输出：

* 日志会打印在命令窗口。
* 日志会保存在日志文件中，每次执行命令时，都会新建一个日志文件，文件位于当前目录的`log`文件夹下。文件名为：`pid[进程ID]-时间戳.log`，如：`pid[32700]-20210127204506001.log`。

日志（示例）：

* `[2021-01-27 22:45:45] Now Memory, WorkingSetSize[136244 Kb, 133.1 Mb], WorkSetShared[63044 Kb, 61.6 Mb], WorkSetPrivate[73200 Kb, 71.5 Mb]`
  * `WorkingSetSize`：工作集（内存），进程当前正在使用的物理内存量。**注：**工作集（内存）=内存（专用工作集）+内存（共享工作集）。
  * `WorkSetShared`：内存（共享工作集），由该进程所使用且可与其他进程共享的物理内存量。
  * `WorkSetPrivate`：内存（专用工作集），由该进程所使用而其他进程无法使用的物理内存量。

  该条日志在启动时打印，显示进程的三种内存值（分别显示Kb和Mb两种单位的数值），以上三种内存值同样可以在**任务管理器**的**详细信息**标签页查看到。

* `[2021-01-27 22:45:58] WorkingSet[(140396 Kb, 137.1 Mb), +(836 Kb, 0.8 Mb)], Shared[(62960 Kb, 61.5 Mb), +(0 Kb, 0.0 Mb)], Private[(77436 Kb, 75.6 Mb), +(836 Kb, 0.8 Mb)]`

  `[2021-01-27 22:46:50] WorkingSet[(135324 Kb, 132.2 Mb), -(5072 Kb, 5.0 Mb)], Shared[(62964 Kb, 61.5 Mb), -(4 Kb, 0.0 Mb)], Private[(72360 Kb, 70.7 Mb), -(5076 Kb, 5.0 Mb)]`

  * `WorkingSet`：工作集（内存）。
  * `Shared`：内存（共享工作集）。
  * `Private`：内存（专用工作集）。

该条日志在监控到内存波动时打印，显示进程的三种内存值（分别显示Kb和Mb两种单位的数值），同时显示与上次监控的内存波动值，`+`表示内存增长，`-`表示内存减少。

## 选项

### -p，--pid

说明：用于设置进程ID。

参数：进程ID。

参数类型：无符号整型。

### -m，--msize

说明：用于设置监控内存波动，当内存波动超过该值时，则打印控制台和日志。

参数：内存波动值。

参数类型：无符号整型。

参数单位：字节（Kb）。

参数范围：1Kb ~ 102400Kb（即100Mb）。

### -f，--freq

说明：用于设置监控的频率，固定时间触发监控事件。

参数：监控频率。

参数类型：无符号整型。

参数单位：秒（s）。

参数范围：1s ~ 86400s（即1天）。

### --help

说明：用于查看帮助。
